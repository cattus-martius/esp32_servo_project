# QM PROJECT MEMORY
## –©–æ–¥–µ–Ω–Ω–∏–∫ –µ–≤–æ–ª—é—Ü—ñ—ó ESP32 –ø—Ä–æ–µ–∫—Ç—É

**–ü—Ä–æ–µ–∫—Ç:** esp32_project  
**–í–ª–∞—Å–Ω–∏–∫:** Vadym Kotenko (cattus-martius)  
**GitHub:** https://github.com/cattus-martius/esp32_project  
**–°—Ç–≤–æ—Ä–µ–Ω–æ:** 15.02.2026  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 20.02.2026

---

## üìã HARDWARE CONFIGURATION

### ESP32 DevKit Pinout

**Servo Motor (9g):**
- Signal ‚Üí GPIO 25 (–∑–º—ñ–Ω–µ–Ω–æ –∑ GPIO 13)
- VCC ‚Üí 5V
- GND ‚Üí GND

**Joystick KY-023:**
- VCC ‚Üí 3.3V
- GND ‚Üí GND
- VRx (–∑–µ–ª–µ–Ω–∏–π) ‚Üí GPIO 35 (ADC1_CH7)
- VRy (–∂–æ–≤—Ç–∏–π) ‚Üí GPIO 32 (ADC1_CH4) - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
- SW (–æ—Ä–∞–Ω–∂–µ–≤–∏–π) ‚Üí GPIO 33 (ADC1_CH5, internal pullup)

**–í–ê–ñ–õ–ò–í–û:** 
- GPIO34-39 –ù–ï –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å INPUT_PULLUP!
- –î–∂–æ–π—Å—Ç–∏–∫ –û–ë–û–í'–Ø–ó–ö–û–í–û –Ω–∞ 3.3V! 5V –ø–æ—à–∫–æ–¥–∏—Ç—å ADC –ø—ñ–Ω–∏ ESP32!

**Pulse Button:**
- Contact 1 ‚Üí GPIO 35 (ADC1_CH7, input-only, internal pullup)
- Contact 2 ‚Üí GPIO 33 (ADC1_CH5, internal pullup)
- –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ: D35 —ñ D33 –∑–∞–º–∏–∫–∞—é—Ç—å—Å—è –º—ñ–∂ —Å–æ–±–æ—é

**LED:**
- Built-in LED ‚Üí GPIO 2

**–ü—Ä–∏–º—ñ—Ç–∫–∏:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ ADC1 pins (ADC2 –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—î –∑ WiFi)
- Servo –∂–∏–≤–ª–µ–Ω–Ω—è: USB –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, –∑–æ–≤–Ω—ñ—à–Ω—î 5V –¥–ª—è production

---

## üîß –¢–ï–•–ù–Ü–ß–ù–Ü –ü–ê–†–ê–ú–ï–¢–†–ò

### Servo Motor 9g

**–î—ñ–∞–ø–∞–∑–æ–Ω —Ä—É—Ö—É:** 0-180 –≥—Ä–∞–¥—É—Å—ñ–≤  
**–û–ø—Ç–∏–º–∞–ª—å–Ω—ñ –∑–∞—Ç—Ä–∏–º–∫–∏:**
- –ü–ª–∞–≤–Ω–∏–π —Ä—É—Ö: 15ms –º—ñ–∂ –∫—Ä–æ–∫–∞–º–∏
- –¶–∏–∫–ª–∏ "–ø–æ–≥–ª–∞–¥–∏—Ç–∏": 250ms = –Ω—ñ–∂–Ω–æ
- –¶–∏–∫–ª–∏ "–ø–µ—Å—Ç–∏—Ç–∏": 150-300ms (—Ä–µ–≥—É–ª—å–æ–≤–∞–Ω–∞ —ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ñ—Å—Ç—å)

**–ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è:**
- 0¬∞ = –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–ª—ñ–≤–æ
- 90¬∞ = —Ü–µ–Ω—Ç—Ä
- 180¬∞ = –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–ø—Ä–∞–≤–æ

### Joystick KY-023

**–¢–∏–ø:** –ê–Ω–∞–ª–æ–≥–æ–≤–∏–π 2-–æ—Å—å–æ–≤–∏–π  
**–î—ñ–∞–ø–∞–∑–æ–Ω:** 0-4095 (12-bit ADC)  
**–¶–µ–Ω—Ç—Ä:** ~2048 (—Å–µ—Ä–µ–¥–∏–Ω–∞ –¥—ñ–∞–ø–∞–∑–æ–Ω—É)  
**Deadzone:** ¬±100 –≤—ñ–¥ —Ü–µ–Ω—Ç—Ä—É (–¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ)

**–ö–Ω–æ–ø–∫–∞:**
- LOW = –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞
- HIGH = –≤—ñ–¥–ø—É—â–µ–Ω–∞

---

## üì° API ENDPOINTS (servo_control.cpp)

### GET /api/status
–û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏

**Response:**
```json
{
  "status": "ok",
  "led": "on/off",
  "servo_angle": 90,
  "cycle_running": false,
  "cycle_count": 0,
  "uptime": 3600,
  "freeHeap": 250000,
  "commands": 42,
  "rssi": -45
}
```

### POST /api/led
–ö–µ—Ä—É–≤–∞–Ω–Ω—è LED

**Request:**
```json
{"state": "on"}  // –∞–±–æ "off"
```

### POST /api/servo
–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∫—É—Ç —Å–µ—Ä–≤–æ

**Request:**
```json
{"angle": 90}  // 0-180
```

### POST /api/servo/sweep
–ü–ª–∞–≤–Ω–∏–π —Ä—É—Ö –¥–æ –∑–∞–¥–∞–Ω–æ–≥–æ –∫—É—Ç–∞

**Request:**
```json
{
  "target": 180,  // 0-180
  "speed": 15     // 5-100ms –∑–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –∫—Ä–æ–∫–∞–º–∏
}
```

### POST /api/servo/cycle
–¶–∏–∫–ª–∏ —Ä—É—Ö—É 0-180

**Request:**
```json
{
  "count": 5,     // –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ü–∏–∫–ª—ñ–≤ (0 = –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–æ)
  "delay": 300    // 100-2000ms –∑–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ —Ä—É—Ö–∞–º–∏
}
```

### POST /api/servo/stop
–ó—É–ø–∏–Ω–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Ü–∏–∫–ª

---

## üí° –Ü–î–ï–á –î–õ–Ø –ú–ê–ô–ë–£–¢–ù–Ü–• –°–ö–ï–¢–ß–Ü–í

### joystick_read.cpp
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ß–∏—Ç–∞–Ω–Ω—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–∞ –∫–Ω–æ–ø–∫–∏ –¥–∂–æ–π—Å—Ç–∏–∫–∞

**–§—É–Ω–∫—Ü—ñ—ó:**
- –ß–∏—Ç–∞–Ω–Ω—è X, Y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (0-4095)
- –î–µ—Ç–µ–∫—Ü—ñ—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏
- Serial output –¥–ª—è debugging
- –ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è —Ü–µ–Ω—Ç—Ä—É

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–∂–æ–π—Å—Ç–∏–∫–∞
- Debugging –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- –ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è deadzone

### servo_joystick.cpp
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ö–µ—Ä—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–æ —á–µ—Ä–µ–∑ –¥–∂–æ–π—Å—Ç–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

**–§—É–Ω–∫—Ü—ñ—ó:**
- X axis ‚Üí –∫—É—Ç —Å–µ—Ä–≤–æ (0-180)
- Y axis ‚Üí —à–≤–∏–¥–∫—ñ—Å—Ç—å —Ä—É—Ö—É
- Button ‚Üí reset –¥–æ —Ü–µ–Ω—Ç—Ä—É (90¬∞)
- Serial feedback

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –†—É—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è
- –ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è –¥—ñ–∞–ø–∞–∑–æ–Ω—É

**–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:**
- Smooth control —á–µ—Ä–µ–∑ mapping –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- Deadzone –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ —Ü–µ–Ω—Ç—Ä—É
- Real-time feedback —á–µ—Ä–µ–∑ Serial

---

## üìö –Ü–°–¢–û–†–Ü–Ø –ü–†–û–ï–ö–¢–£

### 2026-02-05
- –°—Ç–≤–æ—Ä–µ–Ω–æ Q_Sketches —Ä–µ–ø–æ (Arduino IDE —Ñ–æ—Ä–º–∞—Ç)
- –†–æ–∑—Ä–æ–±–ª–µ–Ω–æ servo_cycles.ino –∑ REST API
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è pinout —Ç–∞ API

### 2026-02-15
- –°—Ç–≤–æ—Ä–µ–Ω–æ esp32_servo_project (PlatformIO —Ñ–æ—Ä–º–∞—Ç)
- –ú—ñ–≥—Ä–∞—Ü—ñ—è servo_cycles.ino ‚Üí servo_control.cpp
- –î–æ–¥–∞–Ω–æ blink.cpp –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 2026-02-19
- –ü–µ—Ä—à–∞ —É—Å–ø—ñ—à–Ω–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—è –≤ IntelliJ IDEA
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è PlatformIO environments

### 2026-02-20, 00:52
- Rename —Ä–µ–ø–æ: esp32_servo_project ‚Üí esp32_project
- –ú—ñ–≥—Ä–∞—Ü—ñ—è StaticJsonDocument ‚Üí JsonDocument (ArduinoJson 7.x)
- Commit: a0a962d

### 2026-02-20, 01:15
- –°—Ç–≤–æ—Ä–µ–Ω–æ QM_PROJECT_MEMORY.md
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ —Ü—ñ–Ω–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ Q_Sketches
- Q_Sketches ‚Üí —Å—Ç–∞—Ç—É—Å LEGACY (—Ç—ñ–ª—å–∫–∏ –¥–ª—è Arduino IDE —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ)

### 2026-02-20, 01:24
- –í–∏–¥–∞–ª–µ–Ω–æ Q_Sketches (–ª–æ–∫–∞–ª—å–Ω–æ + GitHub)
- –ü—Ä–∏—á–∏–Ω–∞: –¥—É–±–ª—é–≤–∞–≤ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª esp32_project, 95% –ø–æ—Ä–æ–∂–Ω—ñ–π
- –í—Å—è —Ü—ñ–Ω–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –∑–±–µ—Ä–µ–∂–µ–Ω–∞ –≤ QM_PROJECT_MEMORY.md

### 2026-02-20, 11:14
- –û–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–∑–ø—ñ–Ω–æ–≤–∫—É –¥–∂–æ–π—Å—Ç–∏–∫–∞: VP/VN/D34 (–≤—Å—ñ ADC1, WiFi-safe)
- –î–æ–¥–∞–Ω–æ –ø—É–ª—å—Å-–∫–Ω–æ–ø–∫—É: D35 + D33
- –ü—Ä–∏—á–∏–Ω–∞ –∑–º—ñ–Ω–∏: —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É ADC2 –∑ WiFi
- –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–æ —Ä–æ–∑—Ä–æ–±–∫–∏ joystick_control.cpp

### 2026-02-20, 11:28
- –°—Ç–≤–æ—Ä–µ–Ω–æ joystick_test.cpp - —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫–µ—Ç—á –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–∂–æ–π—Å—Ç–∏–∫–∞
- –ü–µ—Ä—à–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—è: —É—Å–ø—ñ—à–Ω–∞ (–ø—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è #include <Arduino.h>)
- –ü–µ—Ä—à–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: —É—Å–ø—ñ—à–Ω–µ

### 2026-02-20, 11:33
- –í–∏—è–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º—É: –¥–∂–æ–π—Å—Ç–∏–∫ –Ω–∞ 5V, ESP32 ADC —Ç—ñ–ª—å–∫–∏ –¥–æ 3.3V!
- –†–∏–∑–∏–∫ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è ADC –ø—ñ–Ω—ñ–≤
- –†—ñ—à–µ–Ω–Ω—è: –≤–∏–≤–µ—Å—Ç–∏ 3.3V –ø—ñ–Ω –¥–æ–≤–≥–æ—é –ø–µ—Ä–µ–º–∏—á–∫–æ—é –∑-–ø—ñ–¥ ESP32
- –°—Ç–∞—Ç—É—Å: —á–µ–∫–∞—î–º–æ –∞–∫—É—Ä–∞—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–º–æ–Ω—Ç–∞–∂—É –ø—ñ—Å–ª—è –ø—Ä–æ–≥—É–ª—è–Ω–∫–∏

### 2026-02-20, 17:30 - PHASE 7 –ó–ê–í–ï–†–®–ï–ù–û! üéâ
**–î–∂–æ–π—Å—Ç–∏–∫ + WiFi + REST API + –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

**–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è:**
- –í–∏—è–≤–ª–µ–Ω–æ —â–æ GPIO34-39 –ù–ï –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å INPUT_PULLUP
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∫–Ω–æ–ø–∫—É –∑ D34 –Ω–∞ D33
- –î–æ–¥–∞–Ω–æ deadzone (¬±20) –¥–ª—è –∞–Ω–∞–ª–æ–≥–æ–≤–∏—Ö –≤—Ö–æ–¥—ñ–≤
- –î–æ–¥–∞–Ω–æ debouncing (300–º—Å) –¥–ª—è –∫–Ω–æ–ø–∫–∏
- –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –Ω–µ–±–ª–æ–∫—É—é—á—É –ª–æ–≥—ñ–∫—É –∑ millis()
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ —Å–µ—Ä–≤–æ –∑ D13 –Ω–∞ D25 (–±–ª–∏–∂—á–µ –¥–æ –¥–∂–æ–π—Å—Ç–∏–∫–∞)

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:**
1. –î–∂–æ–π—Å—Ç–∏–∫ –ª–æ–∫–∞–ª—å–Ω–æ: –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø, —Ä–µ–≥—É–ª—é–≤–∞–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
2. WiFi + REST API –¥–ª—è –≤—ñ–¥–¥–∞–ª–µ–Ω–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è
3. –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ —Ç–µ–º–Ω–æ—é —Ç–µ–º–æ—é
4. –î–∏–Ω–∞–º—ñ—á–Ω–∞ –∑–º—ñ–Ω–∞ —à–≤–∏–¥–∫–æ—Å—Ç—ñ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ (–∫–Ω–æ–ø–∫–∏ +/-)

**–§–∞–π–ª–∏:**
- src/joystick_control.cpp - –ø–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª
- src/joystick_test.cpp - —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫–µ—Ç—á
- include/wifi_credentials.h - WiFi credentials (–Ω–µ –≤ git)
- JOYSTICK_WIRING.md - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ä–æ–∑–ø—ñ–Ω–æ–≤–∫–∏

**IP:** 192.168.1.14 (MAC: 78:42:1c:65:a6:f0)

---

## üéØ –ü–û–¢–û–ß–ù–ò–ô –°–¢–ê–¢–£–°

**–ê–∫—Ç–∏–≤–Ω—ñ —Å–∫–µ—Ç—á—ñ:**
- ‚úÖ servo_control.cpp - REST API –¥–ª—è —Å–µ—Ä–≤–æ (—Ä–æ–±–æ—á–∏–π)
- ‚úÖ joystick_control.cpp - Phase 7 (—Ä–æ–±–æ—á–∏–π) üéâ
- ‚úÖ webcam_platform.cpp - Phase 8 (–≥–æ—Ç–æ–≤–∏–π –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è) üìπ
- ‚úÖ joystick_test.cpp - —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫–µ—Ç—á (—Ä–æ–±–æ—á–∏–π)
- ‚úÖ blink.cpp - —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫–µ—Ç—á (—Ä–æ–±–æ—á–∏–π)

**–ù–∞—Å—Ç—É–ø–Ω–∞ —Ñ–∞–∑–∞:**
- ‚è≥ Phase 9 - –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

**–ê—Ä—Ö—ñ–≤:**
- üóëÔ∏è Q_Sketches - –≤–∏–¥–∞–ª–µ–Ω–æ 20.02.2026 (–¥—É–±–ª—é–≤–∞–≤ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª esp32_project)

---

## üîó RELATED PROJECTS

- **Q_SME** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–∞ –ø–∞–º'—è—Ç—å (–ø—Ä–∏–≤–∞—Ç–Ω–∞)

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 20.02.2026, 17:30  
**–ê–≤—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:** –õ—ñ–∑–∞
